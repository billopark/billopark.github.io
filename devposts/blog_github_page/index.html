<!DOCTYPE html>
<html lang="ko">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Billo Park">
    <meta name="description" content="Hello! I&#39;m Billo">
    <meta name="keywords" content="blog,developer,boardgame">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Github Pages &#43; Hugo를 사용한 블로그 구축기"/>
<meta name="twitter:description" content="Github Pages &#43; Hugo로 결정하게 된 이유 개발 하면서 구글링을 하다보면 많은 개발블로그들을 만날 수 있다. 개발 블로그들을 보면서 필요성을 느끼고 나에게 어떤 종류의 블로그가 필요한지 고민해봤다. 내가 필요했던 조건은 2가지였는데,
 관리를 따로 하지 않아도 될 만큼 수월할 것 커스터마이징이 쉽게 가능할 것  이었다.
우선, 첫번째 조건에 의해서 동적 사이트보다는 정적 사이트를 선호하게 되었다.
일반적으로 웹에서 쉽게 만나볼 수 있는 블로그들은 동적 사이트이다. 동적 사이트란, 사이트 내부에 DB가 존재해서 사이트를 접속하는 시점에 DB에 있는 정보를 읽어와서 접속 시점마다 내용이 다를 수 있는, 그런 형태의 사이트를 의미한다."/>

    <meta property="og:title" content="Github Pages &#43; Hugo를 사용한 블로그 구축기" />
<meta property="og:description" content="Github Pages &#43; Hugo로 결정하게 된 이유 개발 하면서 구글링을 하다보면 많은 개발블로그들을 만날 수 있다. 개발 블로그들을 보면서 필요성을 느끼고 나에게 어떤 종류의 블로그가 필요한지 고민해봤다. 내가 필요했던 조건은 2가지였는데,
 관리를 따로 하지 않아도 될 만큼 수월할 것 커스터마이징이 쉽게 가능할 것  이었다.
우선, 첫번째 조건에 의해서 동적 사이트보다는 정적 사이트를 선호하게 되었다.
일반적으로 웹에서 쉽게 만나볼 수 있는 블로그들은 동적 사이트이다. 동적 사이트란, 사이트 내부에 DB가 존재해서 사이트를 접속하는 시점에 DB에 있는 정보를 읽어와서 접속 시점마다 내용이 다를 수 있는, 그런 형태의 사이트를 의미한다." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.billo.io/devposts/blog_github_page/" />
<meta property="article:published_time" content="2019-11-23T22:27:33+09:00" />
<meta property="article:modified_time" content="2019-11-23T22:27:33+09:00" />


    
      <base href="https://blog.billo.io/devposts/blog_github_page/">
    
    <title>
  Github Pages &#43; Hugo를 사용한 블로그 구축기 · Billo Park
</title>

    
      <link rel="canonical" href="https://blog.billo.io/devposts/blog_github_page/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://blog.billo.io/css/coder.min.9f4f034f4b47e43195a49a37078c3bc350d0120e736bb2a4e102d116d7db2363.css" integrity="sha256-n08DT0tH5DGVpJo3B4w7w1DQEg5za7Kk4QLRFtfbI2M=" crossorigin="anonymous" media="screen" />
    

    

    

    

    
    
    <link rel="icon" type="image/png" href="https://blog.billo.io/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://blog.billo.io/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.74.3" />
    
    
    <meta name="naver-site-verification" content="dcd74279d8766b1eb11bf3c826dbdc112dec682b"/>
  </head>

  <body class=" ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://blog.billo.io/">
      Billo Park
    </a>
    
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://blog.billo.io/about/">About</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://blog.billo.io/devposts/">Development</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://blog.billo.io/bgposts/">Boardgame</a>
          </li>
        
      
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">Github Pages &#43; Hugo를 사용한 블로그 구축기</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2019-11-23T22:27:33&#43;09:00'>
                November 23, 2019
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              5분
            </span>
          </div>
          
          <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="https://blog.billo.io/tags/hugo/">hugo</a>
      <span class="separator">•</span>
    <a href="https://blog.billo.io/tags/github-pages/">github pages</a></div>

        </div>
      </header>

      <div>
        <h2 id="github-pages--hugo로-결정하게-된-이유">Github Pages + Hugo로 결정하게 된 이유</h2>
<p>개발 하면서 구글링을 하다보면 많은 개발블로그들을 만날 수 있다. 개발 블로그들을 보면서 필요성을 느끼고 나에게 어떤 종류의 블로그가 필요한지 고민해봤다. 내가 필요했던 조건은 2가지였는데,</p>
<ol>
<li>관리를 따로 하지 않아도 될 만큼 수월할 것</li>
<li>커스터마이징이 쉽게 가능할 것</li>
</ol>
<p>이었다.</p>
<p>우선, 첫번째 조건에 의해서 동적 사이트보다는 정적 사이트를 선호하게 되었다.</p>
<p>일반적으로 웹에서 쉽게 만나볼 수 있는 블로그들은 <strong>동적 사이트</strong>이다. <strong>동적 사이트</strong>란, 사이트 내부에 DB가 존재해서 사이트를 접속하는 시점에 DB에 있는 정보를 읽어와서 접속 시점마다 내용이 다를 수 있는, 그런 형태의 사이트를 의미한다. 네이버 블로그, 티스토리 블로그, 워드프레스 모두 이런 형태의 서비스들이다.</p>
<p>반면 정적 사이트는 서버에 있는 미리 저장된 파일들이 그저 서버를 통해 제공되기만 하는 형태의 사이트를 말한다. 정적 사이트는 동적 사이트에 비해서 실시간성이 떨어지지만, 속도가 빠르고 관리가 수월하며, 값싸게 제공될 수 있고 Caching이 가능하다는 장점이 있다.</p>
<p>정적 사이트의 경우, 정적 사이트를 만들어주는 뛰어난 툴들이 많이 존재한다. 이를 Static Site Generator 라고 하는데, 대표적으로 <a href="https://jekyllrb.com/">Jekyll</a>, <a href="https://gohugo.io">Hugo</a>, <a href="https://www.gatsbyjs.org/">Gatsby</a> 등이 있다. 방금 언급한 모든 툴들은 이미 많은 사람들이 사용하고 있을 정도로 검증되었으며, 쉽게 커스터마이징 할 수 있도록 가이드를 제공한다. 따라서 이중 어느것을 선택해도 괜찮다. 내가 선택한 것은 <a href="https://gohugo.io/">Hugo</a> 이다. 이유는 평소 내가 좋아하는 Golang으로 구성된 프로젝트이고, 오픈소스 테마중 원하는 테마가 있어서였다.</p>
<p>이렇게 프레임워크를 정한 후, 어떻게 사이트를 퍼블리싱 할 것인지를 고민하기 시작했다. 이때 내가 선택한 것은 <a href="https://pages.github.com/">Github Pages</a> 였다.</p>

<figure >
        <img src="https://blog-static.billo.io/images/blog_github_page/github_page_site.png" />
</figure>

<p>Github Pages란 <a href="https://github.com">Github</a> 에 특별한 Repository를 만들면 자신의 Github ID를 이용해서 <code>(내 github ID).github.io</code> 형태로 정적 사이트를 제공해주는 서비스이다. Github Pages 를 이용하게 된 이유는</p>
<ol>
<li>호스팅에 대해서 따로 고민하지 않아도 된다.</li>
<li>코드관리도 Github에서 할 것이므로 편하다.</li>
<li>무료다.</li>
</ol>
<p>였다. 이렇게 편하게 관리해주는데 사용하지 않을 이유가 없었다.</p>
<p>현재 이 블로그는  를 이용해 구성되어 있고, <a href="https://pages.github.com/">Github Pages</a> 를 이용해 호스팅 되고 있다.</p>
<h2 id="프로젝트-세팅">프로젝트 세팅</h2>
<p>Hugo의 경우, <a href="https://gohugo.io/hosting-and-deployment/hosting-on-github/">Github에 호스팅하기</a> 페이지에서 엄청 자세히 잘 나와있어 이대로 프로젝트를 셋업했다. 나의 경우 User/Organizations Page 의 가이드 대로 셋업했다. 간단하게 설명하면 깃헙 레포지토리를 <strong>2개</strong> 만들게되는데, 하나는 프로젝트 전체를 저장하는 프라이빗 레포지토리이고, 나머지는 <code>(내 github ID).github.io</code> 이름의 레포지토리로 여기는 공개된 사이트의 코드를 담고있는 레포지토리이다.</p>

<figure >
        <img src="https://blog-static.billo.io/images/blog_github_page/github_repos.png" />
</figure>

<h2 id="블로그-기본-정보-설정하기">블로그 기본 정보 설정하기</h2>
<p>이렇게 설정한 후, 기본적인 블로그 설정에 나섰다. 가장 먼저 했던 것은 테마 고르기였다. 아까 말했듯 <a href="https://gohugo.io">Hugo</a>와 같은 서비스들은 테마 종류가 정말 많다. 이들은 <a href="https://themes.gohugo.io/">Hugo Theme 페이지</a> 에서 고를 수 있다. 내가 선택한 테마는 <a href="https://themes.gohugo.io/hugo-coder/">Coder</a> 이다.</p>

<figure >
        <img src="https://blog-static.billo.io/images/blog_github_page/hugo_coder_theme.png" />
</figure>

<p>테마를 설치하는 방법의 경우 각 테마 페이지에 들어가면 설치방법이 나와있다. 이 테마를 설치한 후, 블로그의 기본적인 설정을 담는 config.yaml 파일을 채워나갔다.</p>
<h2 id="블로그-커스터마이징-하기">블로그 커스터마이징 하기</h2>
<p>이렇게 기본적인 테마를 채운 후, 내가 불편했던 점을 커스터마이징했다. 내가 닥쳤던 문제들은 아래와 같다.</p>
<ol>
<li>내 도메인을 사용해야 한다.</li>
<li>블로그 게시판이 여러개여야 한다.</li>
<li>이미지가 느리다.</li>
</ol>
<p>이제 각각 어떻게 문제들을 해결했는지 아래에서 설명해보려고 한다.</p>
<h3 id="내-도메인-사용하게-하기">내 도메인 사용하게 하기</h3>
<p>나는 blog.billo.io 도메인에 이 블로그를 붙이고 싶었다. 이 과정은 매우 간단했다.</p>
<p>우선 공개된 블로그 레포지토리의 <code>Settings &gt; Options &gt; Github Pages</code> 에 들어간다.</p>

<figure >
        <img src="https://blog-static.billo.io/images/blog_github_page/github_page_settings_domain.png" />
</figure>

<p>여기서 내가 사용할 도메인 주소를 넣고 저장한다.</p>
<p>그다음 내가 사용할 도메인의 CNAME을 변경해주어야 하는데, 이는 자신의 도메인 구입 업체별로 도메인 세팅 방법이 다르다. 포인트는 내가 사용할 도메인의 CNAME을 <code>(내 github ID).github.io</code> 로 변경해주는 것이다.</p>

<figure >
        <img src="https://blog-static.billo.io/images/blog_github_page/custom_domain_dns.png" />
</figure>

<p>이렇게 셋업한 후, DNS가 퍼지기를 기다리면 된다.</p>
<h3 id="블로그-게시판-늘리기">블로그 게시판 늘리기</h3>
<p>나는 개발 관련된 포스트와 보드게임 관련된 포스트 모두를 이 블로그에서 작성하고 싶었다. 그래서 나는 게시판을 늘리기로 했다.</p>
<p>우선 content directory 내에 보드게임 관련 directory와 개발 관련 directory 둘을 만들었다. Hugo에서는 content내의 directory가 곧 게시판이어서, 두 directory를 만들면 해결되었다. 그리고 config 파일에서 메뉴에 해당하는 부분에서 해당 directory들을 적용해주면 쉽게 여러 게시판을 만들 수 있었다.</p>
<h3 id="이미지를-빠르게---cdn">이미지를 빠르게 - CDN</h3>
<p>(이부분은 내용이 길고 어려운 부분을 다소 포함)</p>
<p>첫 보드게임 관련 글을 쓰고, 이미지 로드가 <strong>심각하게</strong> 느리다는 것을 확인했다. Github에서 무료로 호스팅을 제공해주니 만큼, 좋은 스피드를 기대하는 것은 무리였다.</p>
<p>그래서 나는 <strong>CDN</strong> 서비스를 이용하기로 했다. CDN이란 Content Delivery Network의 약자로서 유저들이 자료를 접속할 때 위치에 따라서 적절히 컨텐츠를 전달하는 것을 의미한다. 이 CDN서비스의 중요한 피쳐중 하나가 <strong>캐싱</strong>이다. 이미지를 <strong>캐싱</strong>하여 전달받으면, 훨씬 빠른 속도로 이미지를 로드할 수 있다.</p>
<p>내 블로그에서 이미지를 가져올 때, 그냥 Github에서 주는 이미지를 그대로 내려주는 것이 아니고, CDN 네트워크에서 이미지를 가져오도록 했다. 이를 위해 내가 했던 세팅을 공유하고자 한다.</p>
<p>모든 클라우드 서비스들은 CDN서비스를 제공하는데, 나는 내가 쓰는 <a href="https://cloud.google.com/">GCP</a>의 Cloud CDN 기능을 이용하기로 했다. GCP는 다른 클라우드 서비스와 다르게 <strong>Remote Origin</strong> 을 지원하지 않는다. 이말은 GCP에 올라와있지 않은 데이터는 CDN을 통해서 제공할 수 없다는 의미이다.</p>
<p>따라서 내가 했던 작업은 크게</p>
<ol>
<li>GCP bucket(스토리지)에 CDN 연결하기</li>
<li>디플로이시 GCP bucket에 이미지 올리기</li>
<li>Post에 이미지 삽입시 CDN의 이미지를 가져오도록 설정하기</li>
</ol>
<p>로 나눌 수 있다.</p>
<p>1번 설정은 과정이 길어, 내가 참고했던 <a href="https://medium.com/@jwlee98/gcp-dns-%EB%B6%80%ED%84%B0-%ED%95%98%EB%82%98%EC%94%A9-%ED%95%B4%EB%B3%B4%EB%8A%94-google-cloud-%EB%A1%9C-%EC%84%9C%EB%B9%84%EC%8A%A4-%ED%95%B4%EB%B3%B4%EA%B8%B0-3%ED%83%84-cloud-cdn-1b861e40f72a">미디움 링크</a> 를 남기는 것으로 갈음하고자 한다.</p>
<p>2번의 경우, GCP의 rsync 기능을 이용했다. rsync란 특정 directory/GCP bucket간을 동기화 시켜주는 기능이다. 이 기능을 이용해 블로그의 이미지들이 올라가는 directory인 static directory 와 CDN이 연결된 bucket을 sync 해주기로 했다.</p>
<p>우선, gcloud 라는 커맨드라인 프로그램을 설치하고, <code>gcloud auth login</code>을 통해서 로그인한다.</p>
<p>그리고, 디플로이 스크립트에 아래 커맨드를 추가한다.</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">gsutil rsync -r static gs://{{버킷-id}}
</code></pre></div><p>이렇게 해주면, 매 배포시 마다 static directory의 파일들을 해당 버킷에 동기화시키게 된다.</p>
<p>3번의 기능적 요구조건을 떠올려보자. 로컬환경에서 블로그를 띄워서 확인할 때에는 CDN의 이미지를 가져오면 안되고 로컬의 값을 가져와야 한다. 그리고 배포된 환경에서는 CDN의 이미지를 가져와야 한다. 이렇게 이미지의 주소를 실행하는 환경에 따라서 Dynamic하게 가져오려면 Hugo의 일반 image 삽입방법으로는 커버할 수 없다.</p>
<p>그래서 생각해낸 방법은 Hugo의 <a href="https://gohugo.io/content-management/shortcodes/"><strong>shortcode</strong></a> 기능이다. shortcode란 컨텐츠 파일에서 사용할 수 있는 간단한 코드를 말한다. 우선, Hugo의 환경변수 기능을 사용해서, Hugo 실행시 어떤 환경인지 알 수 있게 했다. 그리고 환경변수에 따라서 path를 다르게 가져오기 위해 각 실행환경 별로 config 파일을 만들고, config파일에 <code>staticpath</code>라는 파라미터를 추가했다.</p>

<figure >
        <img src="https://blog-static.billo.io/images/blog_github_page/config_folder.png" />
</figure>

<p>_default/params.toml</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">staticpath = <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>
</code></pre></div><p>production/params.toml</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">staticpath = <span style="color:#0ff;font-weight:bold">&#34;https://blog-static.billo.io&#34;</span>
</code></pre></div><p>그리고 img라는 이미지 shortcode를 만들었다. 이 shortcode는 HTML의 img 태그를 자동으로 만들어준다. 이 때 <code>img</code> 태그의 <code>src</code>를 넣을 때, <code>staticpath</code>를 자동으로 붙여주도록 했다.</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#007f7f">&lt;!-- image --&gt;</span>
&lt;<span style="font-weight:bold">figure</span> <span style="color:#f00">{{</span> <span style="color:#007f7f">with</span> <span style="color:#f00">.</span><span style="color:#007f7f">Get</span> <span style="color:#f00">&#34;</span><span style="color:#007f7f">class</span><span style="color:#f00">&#34;</span> <span style="color:#f00">}}</span><span style="color:#007f7f">class</span>=<span style="color:#0ff;font-weight:bold">&#34;{{.}}&#34;</span><span style="color:#f00">{{</span> <span style="color:#007f7f">end</span> <span style="color:#f00">}}</span>&gt;
        &lt;<span style="font-weight:bold">img</span> <span style="color:#007f7f">src</span>=<span style="color:#0ff;font-weight:bold">&#34;{{ $.Page.Site.Params.staticpath }}{{ .Get &#34;</span><span style="color:#007f7f">src</span><span style="color:#f00">&#34;</span> <span style="color:#f00">}}&#34;</span> /&gt;
&lt;/<span style="font-weight:bold">figure</span>&gt;
<span style="color:#007f7f">&lt;!-- image --&gt;</span>
</code></pre></div><p>이 shortcode는 <code>layouts/shortcodes</code> 밑에 html파일로 저장하면 된다.</p>
<p>그리고 배포 스크립트에서도 hugo를 빌드할 때 환경변수를 넘겨주도록 변경해주어야 한다.</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">hugo -t hugo-coder --environment production
</code></pre></div><p>이렇게 변경하면, 최종적으로 이미지 CDN 작업이 완료된다.</p>
<h2 id="소회">소회</h2>
<p>아직 만든지 얼마 안된 블로그라 해야할 작업들이 많이 남아있지만, 일차 사용할만 한 수준까지 오게 되어 글을 작성하게 되었다.</p>
<p>생각보다 많은 기능을 Hugo가 제공해주어서 내가 스스로 작업한게 많지는 않다. 이렇게 작업된 블로그는 생각보다 사용해보면 <strong>편하다</strong>. 네이버 블로그나 티스토리를 사용하는 것 보다 쉬울수는 없겠으나, 로컬에서 포스트를 MD로 쓰는 것만 익숙해진다면 어렵지 않게 사용할 수 있는게 신기했다. 그리고 내가 필요한 기능을 내가 만드는 게 생각보다 재밌는 경험이라, 많은 분들께 블로그 하나 만들어 보시기를 추천드린다.</p>

      </div>

      <footer>
        


        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "billoblog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        
        
      </footer>
    </article>

    
  </section>

      </div>

      
  <footer class="footer">
    <section class="container">
      
        <p>Billo Park</p>
      
      
      
      
    </section>
  </footer>

    </main>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-147957269-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


  </body>

</html>
